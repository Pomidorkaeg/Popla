var A=Object.defineProperty,R=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var T=(i,s,a)=>s in i?A(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,m=(i,s)=>{for(var a in s||(s={}))V.call(s,a)&&T(i,a,s[a]);if(q)for(var a of q(s))W.call(s,a)&&T(i,a,s[a]);return i},f=(i,s)=>R(i,O(s));import{j as e,X as I,a2 as X,w as Y,r as $,q as J,n as D,a3 as K,o as Q}from"./ui-vendor.js";import{r as h,e as Z}from"./react-vendor.js";import{L as n,I as d,B as u,C as B,a as _,b as ee,e as se,T as te,f as ie,g as E,h as w,i as ae,j as N,D as re,k as ne,l as le,m as de,t as C}from"./index.js";import{g as ce,a as oe}from"./teamsData.js";import{g as xe,d as me,u as he,c as ue}from"./playerOperations.js";import"./query.js";const je=({formData:i,handleChange:s})=>{const a=ce();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",children:"ФИО игрока"}),e.jsx(d,{id:"name",name:"name",value:i.name,onChange:s,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"position",children:"Позиция"}),e.jsxs("select",{id:"position",name:"position",value:i.position,onChange:s,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"Вратарь",children:"Вратарь"}),e.jsx("option",{value:"Защитник",children:"Защитник"}),e.jsx("option",{value:"Полузащитник",children:"Полузащитник"}),e.jsx("option",{value:"Нападающий",children:"Нападающий"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"number",children:"Номер"}),e.jsx(d,{id:"number",name:"number",type:"number",value:i.number,onChange:s,min:"1",max:"99",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"nationality",children:"Национальность"}),e.jsx(d,{id:"nationality",name:"nationality",value:i.nationality,onChange:s,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"birthDate",children:"Дата рождения"}),e.jsx(d,{id:"birthDate",name:"birthDate",value:i.birthDate,onChange:s,placeholder:"ДД.ММ.ГГГГ",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"teamId",children:"Команда"}),e.jsx("select",{id:"teamId",name:"teamId",value:i.teamId,onChange:s,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:a.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})]})]})},ge=({formData:i,handleChange:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"image",children:"URL фото"}),e.jsx(d,{id:"image",name:"image",value:i.image,onChange:s,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"height",children:"Рост (см)"}),e.jsx(d,{id:"height",name:"height",type:"number",value:i.height,onChange:s,min:"150",max:"220",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"weight",children:"Вес (кг)"}),e.jsx(d,{id:"weight",name:"weight",type:"number",value:i.weight,onChange:s,min:"50",max:"120",required:!0})]})]})]}),pe=({formData:i,handleChange:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"matches",children:"Матчи"}),e.jsx(d,{id:"matches",name:"matches",type:"number",value:i.matches,onChange:s,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"goals",children:"Голы"}),e.jsx(d,{id:"goals",name:"goals",type:"number",value:i.goals,onChange:s,min:"0",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"assists",children:"Передачи"}),e.jsx(d,{id:"assists",name:"assists",type:"number",value:i.assists,onChange:s,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"yellowCards",children:"Жёлтые карточки"}),e.jsx(d,{id:"yellowCards",name:"yellowCards",type:"number",value:i.yellowCards,onChange:s,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"redCards",children:"Красные карточки"}),e.jsx(d,{id:"redCards",name:"redCards",type:"number",value:i.redCards,onChange:s,min:"0",required:!0})]})]})]}),fe=({player:i,onSave:s,onCancel:a})=>{const[l,v]=h.useState(m({},i)),j=g=>{const{name:p,value:b}=g.target;["number","height","weight","matches","goals","assists","yellowCards","redCards"].includes(p)?v(f(m({},l),{[p]:parseInt(b,10)||0})):v(f(m({},l),{[p]:b}))},r=g=>{g.preventDefault(),s(l)};return e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(je,{formData:l,handleChange:j}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{formData:l,handleChange:j}),e.jsx(pe,{formData:l,handleChange:j})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(u,{variant:"outline",type:"button",onClick:a,children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(u,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})},ve=({player:i,onSave:s,onCancel:a})=>e.jsx(fe,{player:i,onSave:s,onCancel:a}),be=({teamName:i,primaryColor:s,onAddNew:a})=>e.jsx(B,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(_,{className:"flex flex-row items-center justify-between",children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:s||"#2e7d32"},children:e.jsx(Y,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{children:["Управление игроками: ",i]})]})}),e.jsxs(u,{onClick:a,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Добавить игрока"]})]})}),ye=({searchTerm:i,setSearchTerm:s})=>e.jsxs("div",{className:"relative mb-6",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(d,{className:"pl-10",placeholder:"Поиск игроков по имени или позиции...",value:i,onChange:a=>s(a.target.value)})]}),we=({players:i,searchTerm:s,primaryColor:a,onEdit:l,onDelete:v})=>{const j=i.filter(r=>r.name.toLowerCase().includes(s.toLowerCase())||r.position.toLowerCase().includes(s.toLowerCase()));return e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"№"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Игрок"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Позиция"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Характеристики"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статистика"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[j.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-white font-medium text-sm",style:{backgroundColor:a||"#2e7d32"},children:r.number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:r.image,alt:r.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsx("div",{className:"text-sm text-gray-500",children:r.nationality})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:r.position})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.height," см, ",r.weight," кг"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:[r.matches," матчей"]}),e.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:[r.goals," голов"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>l(r),className:"text-blue-600 hover:text-blue-900 mr-2",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>v(r.id),className:"text-red-600 hover:text-red-900",children:e.jsx(K,{className:"h-4 w-4"})})]})]},r.id)),j.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-500",children:"Игроки не найдены. Добавьте первого игрока!"})})]})]})})},Te=()=>{const[i]=Z(),s=i.get("team")||"gudauta",[a,l]=h.useState([]),[v,j]=h.useState(""),[r,g]=h.useState(!1),[p,b]=h.useState(null);h.useState({});const[k,P]=h.useState(!1),[c,y]=h.useState(null),x=oe(s);h.useEffect(()=>{const o=xe(s).filter(z=>z.isEditable!==!1);l(o)},[s]);const L=t=>{b(t),g(!0)},F=t=>{if(window.confirm("Вы уверены, что хотите удалить этого игрока?"))try{me(t),l(a.filter(o=>o.id!==t)),C({title:"Игрок удален",description:"Игрок был успешно удален из системы"})}catch(o){C({variant:"destructive",title:"Ошибка",description:"Не удалось удалить игрока"})}},H=()=>{const t={id:`player-${Date.now()}`,name:"",position:"Нападающий",number:a.length+1,birthDate:"",height:180,weight:75,nationality:"Россия",image:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80",matches:0,goals:0,assists:0,yellowCards:0,redCards:0,teamId:s,isEditable:!0};b(t),g(!0)},M=t=>{try{a.some(o=>o.id===t.id)?(he(t),l(a.map(o=>o.id===t.id?t:o)),C({title:"Игрок обновлен",description:"Информация об игроке успешно обновлена"})):(ue(t),l([...a,t]),C({title:"Игрок добавлен",description:"Новый игрок успешно добавлен в систему"})),g(!1),b(null)}catch(o){C({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить изменения"})}},S=()=>{g(!1),b(null)},G=t=>{y(t),P(!0)},U=()=>{c&&(l(a.map(t=>t.id===c.id?c:t)),P(!1),y(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(be,{teamName:(x==null?void 0:x.name)||"Команда",primaryColor:(x==null?void 0:x.primaryColor)||"#2e7d32",onAddNew:H}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Управление игроками"})}),e.jsx(B,{className:"border-0 shadow-lg",children:e.jsx(se,{className:"p-6",children:e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(E,{children:[e.jsx(w,{children:"Имя"}),e.jsx(w,{children:"Позиция"}),e.jsx(w,{children:"Номер"}),e.jsx(w,{children:"Команда"}),e.jsx(w,{className:"text-right",children:"Действия"})]})}),e.jsx(ae,{children:a.map(t=>e.jsxs(E,{children:[e.jsx(N,{className:"font-medium",children:t.name}),e.jsx(N,{children:t.position}),e.jsx(N,{children:t.number}),e.jsx(N,{children:t.team}),e.jsx(N,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{variant:"outline",size:"icon",onClick:()=>G(t),className:"hover:bg-fc-green/10",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(u,{variant:"outline",size:"icon",onClick:()=>F(t.id),className:"hover:bg-red-500/10",children:e.jsx(Q,{className:"h-4 w-4"})})]})})]},t.id))})]})})}),r&&p?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:p.id.includes("player-")&&!a.some(t=>t.id===p.id)?"Добавить нового игрока":"Редактировать игрока"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:S,children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Отмена"]})})]}),e.jsx(ve,{player:p,onSave:M,onCancel:S})]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{searchTerm:v,setSearchTerm:j}),e.jsx(we,{players:a,searchTerm:v,primaryColor:(x==null?void 0:x.primaryColor)||"#2e7d32",onEdit:L,onDelete:F})]}),k&&c&&e.jsx(re,{open:k,onOpenChange:P,children:e.jsxs(ne,{className:"sm:max-w-[425px]",children:[e.jsx(le,{children:e.jsx(de,{children:"Редактирование игрока"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Имя"}),e.jsx(d,{value:c.name,onChange:t=>y(f(m({},c),{name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Позиция"}),e.jsx(d,{value:c.position,onChange:t=>y(f(m({},c),{position:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Номер"}),e.jsx(d,{type:"number",value:c.number,onChange:t=>y(f(m({},c),{number:parseInt(t.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Команда"}),e.jsx(d,{value:c.team,onChange:t=>y(f(m({},c),{team:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"URL изображения"}),e.jsx(d,{value:c.imageUrl||"",onChange:t=>y(f(m({},c),{imageUrl:t.target.value}))})]}),e.jsx(u,{onClick:U,className:"w-full bg-gradient-to-r from-fc-green to-fc-lightGreen text-white hover:from-fc-green/90 hover:to-fc-lightGreen/90",children:"Сохранить"})]})]})})]})};export{Te as default};
